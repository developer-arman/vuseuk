/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsxs as r,jsx as e}from"@dropins/tools/preact-jsx-runtime.js";import{useState as _,useEffect as N}from"@dropins/tools/preact-hooks.js";import{s as u}from"../chunks/algoliaApi.js";import{classes as v}from"@dropins/tools/lib.js";const x=({className:l,results:s=[],isLoading:c=!1,error:i=null,query:h="",onResultClick:o,children:n,...m})=>r("div",{...m,className:v(["algoliasearch-algolia-search",l]),children:[i&&e("div",{className:"algoliasearch-algolia-search__error",children:i}),c&&e("div",{className:"algoliasearch-algolia-search__loading",children:"Loading..."}),!c&&h&&s.length===0&&!i&&r("div",{className:"algoliasearch-algolia-search__no-results",children:['No results found for "',h,'"']}),s.length>0&&e("div",{className:"algoliasearch-algolia-search__results",children:s.map(a=>{var g;return r("div",{className:"algoliasearch-algolia-search__result-item",onClick:()=>o==null?void 0:o(a),children:[a.image&&e("img",{src:a.image,alt:a.name||"Product",className:"algoliasearch-algolia-search__result-image"}),r("div",{className:"algoliasearch-algolia-search__result-content",children:[a.name&&e("h3",{className:"algoliasearch-algolia-search__result-name",children:a.name}),a.sku&&r("p",{className:"algoliasearch-algolia-search__result-sku",children:["SKU: ",a.sku]}),a.price&&r("p",{className:"algoliasearch-algolia-search__result-price",children:["$",(g=a.price)==null?void 0:g.toFixed(2)]})]})]},a.objectID)})}),n]}),L=({query:l="",onResultSelect:s,hitsPerPage:c=10,searchFn:i,...h})=>{const[o,n]=_([]),[m,a]=_(!1),[g,t]=_(null);return N(()=>{(async()=>{if(!l.trim()){n([]),t(null);return}try{a(!0),t(null);const p=await(i??u)(l,{hitsPerPage:c});n(p.results)}catch(d){t(d instanceof Error?d.message:"An error occurred during search"),n([])}finally{a(!1)}})()},[l,c]),e(x,{...h,results:o,isLoading:m,error:g,query:l,onResultClick:f=>{s==null||s(f)}})};export{L as AlgoliaSearch,L as default};
//# sourceMappingURL=AlgoliaSearch.js.map
