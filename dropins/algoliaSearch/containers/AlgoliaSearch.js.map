{"version":3,"file":"AlgoliaSearch.js","sources":["/dropin-template/src/components/AlgoliaSearch/AlgoliaSearch.tsx","/dropin-template/src/containers/AlgoliaSearch/AlgoliaSearch.tsx"],"sourcesContent":["/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n\nimport { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe-commerce/elsie/lib';\nimport { AlgoliaSearchResult } from '@/algoliasearch/api/algoliaApi';\nimport '@/algoliasearch/components/AlgoliaSearch/AlgoliaSearch.css';\n\nexport interface AlgoliaSearchProps extends HTMLAttributes<HTMLDivElement> {\n  results?: AlgoliaSearchResult[];\n  isLoading?: boolean;\n  error?: string | null;\n  query?: string;\n  onResultClick?: (result: AlgoliaSearchResult) => void;\n}\n\nexport const AlgoliaSearch: FunctionComponent<AlgoliaSearchProps> = ({\n  className,\n  results = [],\n  isLoading = false,\n  error = null,\n  query = '',\n  onResultClick,\n  children,\n  ...props\n}) => {\n  return (\n    <div\n      {...props}\n      className={classes(['algoliasearch-algolia-search', className])}\n    >\n      {error && (\n        <div className=\"algoliasearch-algolia-search__error\">{error}</div>\n      )}\n\n      {isLoading && (\n        <div className=\"algoliasearch-algolia-search__loading\">Loading...</div>\n      )}\n\n      {!isLoading && query && results.length === 0 && !error && (\n        <div className=\"algoliasearch-algolia-search__no-results\">\n          No results found for \"{query}\"\n        </div>\n      )}\n\n      {results.length > 0 && (\n        <div className=\"algoliasearch-algolia-search__results\">\n          {results.map((result) => (\n            <div\n              key={result.objectID}\n              className=\"algoliasearch-algolia-search__result-item\"\n              onClick={() => onResultClick?.(result)}\n            >\n              {result.image && (\n                <img\n                  src={result.image}\n                  alt={result.name || 'Product'}\n                  className=\"algoliasearch-algolia-search__result-image\"\n                />\n              )}\n              <div className=\"algoliasearch-algolia-search__result-content\">\n                {result.name && (\n                  <h3 className=\"algoliasearch-algolia-search__result-name\">\n                    {result.name}\n                  </h3>\n                )}\n                {result.sku && (\n                  <p className=\"algoliasearch-algolia-search__result-sku\">\n                    SKU: {result.sku}\n                  </p>\n                )}\n                {result.price && (\n                  <p className=\"algoliasearch-algolia-search__result-price\">\n                    ${result.price?.toFixed(2)}\n                  </p>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {children}\n    </div>\n  );\n};\n","/********************************************************************\n *  Copyright 2025 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  Adobe permits you to use, modify, and distribute this \n * file in accordance with the terms of the Adobe license agreement \n * accompanying it. \n *******************************************************************/\n  \nimport { HTMLAttributes } from 'preact/compat';\nimport { useState, useEffect } from 'preact/hooks';\nimport { Container } from '@adobe-commerce/elsie/lib';\nimport {\n  searchProducts,\n  AlgoliaSearchResult,\n} from '@/algoliasearch/api/algoliaApi';\nimport { AlgoliaSearch as AlgoliaSearchComponent } from '@/algoliasearch/components/AlgoliaSearch';\n\nexport interface AlgoliaSearchProps extends HTMLAttributes<HTMLDivElement> {\n  query?: string;\n  onResultSelect?: (result: AlgoliaSearchResult) => void;\n  hitsPerPage?: number;\n  searchFn?: typeof searchProducts;\n}\n\nexport const AlgoliaSearch: Container<AlgoliaSearchProps> = ({\n  query = '',\n  onResultSelect,\n  hitsPerPage = 10,\n  searchFn,\n  ...props\n}) => {\n  const [results, setResults] = useState<AlgoliaSearchResult[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const performSearch = async () => {\n      if (!query.trim()) {\n        setResults([]);\n        setError(null);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        setError(null);\n        const fn = searchFn ?? searchProducts;\n        const response = await fn(query, { hitsPerPage });\n        setResults(response.results);\n      } catch (err) {\n        setError(\n          err instanceof Error ? err.message : 'An error occurred during search'\n        );\n        setResults([]);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    performSearch();\n  }, [query, hitsPerPage]);\n\n  const handleResultClick = (result: AlgoliaSearchResult) => {\n    onResultSelect?.(result);\n  };\n\n  return (\n    <AlgoliaSearchComponent\n      {...props}\n      results={results}\n      isLoading={isLoading}\n      error={error}\n      query={query}\n      onResultClick={handleResultClick}\n    />\n  );\n};\n"],"names":["AlgoliaSearch","className","results","isLoading","error","query","onResultClick","children","props","jsxs","classes","jsx","result","_a","onResultSelect","hitsPerPage","searchFn","setResults","useState","setIsLoading","setError","useEffect","response","searchProducts","err","AlgoliaSearchComponent"],"mappings":"0OAuBO,MAAMA,EAAuD,CAAC,CACnE,UAAAC,EACA,QAAAC,EAAU,CAAA,EACV,UAAAC,EAAY,GACZ,MAAAC,EAAQ,KACR,MAAAC,EAAQ,GACR,cAAAC,EACA,SAAAC,EACA,GAAGC,CACL,IAEIC,EAAC,MAAA,CACE,GAAGD,EACJ,UAAWE,EAAQ,CAAC,+BAAgCT,CAAS,CAAC,EAE7D,SAAA,CAAAG,GACCO,EAAC,MAAA,CAAI,UAAU,sCAAuC,SAAAP,EAAM,EAG7DD,GACCQ,EAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,aAAU,EAGlE,CAACR,GAAaE,GAASH,EAAQ,SAAW,GAAK,CAACE,GAC/CK,EAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,CAAA,yBACjCJ,EAAM,GAAA,EAC/B,EAGDH,EAAQ,OAAS,GAChBS,EAAC,MAAA,CAAI,UAAU,wCACZ,SAAAT,EAAQ,IAAKU,GAAA,OACZ,OAAAH,EAAC,MAAA,CAEC,UAAU,4CACV,QAAS,IAAMH,GAAA,YAAAA,EAAgBM,GAE9B,SAAA,CAAAA,EAAO,OACND,EAAC,MAAA,CACC,IAAKC,EAAO,MACZ,IAAKA,EAAO,MAAQ,UACpB,UAAU,4CAAA,CAAA,EAGdH,EAAC,MAAA,CAAI,UAAU,+CACZ,SAAA,CAAAG,EAAO,MACND,EAAC,KAAA,CAAG,UAAU,4CACX,WAAO,KACV,EAEDC,EAAO,KACNH,EAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,CAAA,QAChDG,EAAO,GAAA,EACf,EAEDA,EAAO,OACNH,EAAC,IAAA,CAAE,UAAU,6CAA6C,SAAA,CAAA,KACtDI,EAAAD,EAAO,QAAP,YAAAC,EAAc,QAAQ,EAAC,CAAA,CAC3B,CAAA,CAAA,CAEJ,CAAA,CAAA,EA3BKD,EAAO,QAAA,EA6Bf,EACH,EAGDL,CAAA,CAAA,CAAA,EChEMP,EAA+C,CAAC,CAC3D,MAAAK,EAAQ,GACR,eAAAS,EACA,YAAAC,EAAc,GACd,SAAAC,EACA,GAAGR,CACL,IAAM,CACJ,KAAM,CAACN,EAASe,CAAU,EAAIC,EAAgC,CAAA,CAAE,EAC1D,CAACf,EAAWgB,CAAY,EAAID,EAAS,EAAK,EAC1C,CAACd,EAAOgB,CAAQ,EAAIF,EAAwB,IAAI,EAEtD,OAAAG,EAAU,IAAM,EACQ,SAAY,CAChC,GAAI,CAAChB,EAAM,OAAQ,CACjBY,EAAW,CAAA,CAAE,EACbG,EAAS,IAAI,EACb,MACF,CAEA,GAAI,CACFD,EAAa,EAAI,EACjBC,EAAS,IAAI,EAEb,MAAME,EAAW,MADNN,GAAYO,GACGlB,EAAO,CAAE,YAAAU,EAAa,EAChDE,EAAWK,EAAS,OAAO,CAC7B,OAASE,EAAK,CACZJ,EACEI,aAAe,MAAQA,EAAI,QAAU,iCAAA,EAEvCP,EAAW,CAAA,CAAE,CACf,QAAA,CACEE,EAAa,EAAK,CACpB,CACF,GAEA,CACF,EAAG,CAACd,EAAOU,CAAW,CAAC,EAOrBJ,EAACc,EAAA,CACE,GAAGjB,EACJ,QAAAN,EACA,UAAAC,EACA,MAAAC,EACA,MAAAC,EACA,cAXuBO,GAAgC,CACzDE,GAAA,MAAAA,EAAiBF,EACnB,CASmB,CAAA,CAGrB"}